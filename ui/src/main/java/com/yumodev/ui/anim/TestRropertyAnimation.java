package com.yumodev.ui.anim;

import android.animation.Animator;
import android.animation.ObjectAnimator;
import android.animation.ValueAnimator;
import android.util.Log;
import android.view.View;
import android.widget.ImageView;

import com.yumo.demo.view.YmTestFragment;
import com.yumodev.ui.R;
import com.yumodev.ui.recyclerview.Define;

/**
 * Created by yumodev on 17/12/17.
 *
 * ObjectAnimator是ValueAnimator的一个子类
 * 可以设置目标对象和及其属性进行动画。
 *
 * ofFloat(Object target, String propertyName, float... values)
 * 第一个参数：设置动画作用的目标对象
 * 第二个参数：设置动画作用的属性。
 * 第三个是对应的值。
 *
 * setDuration：设置动画运行时间
 * setRepeatCount:设置重复次数
 * setRepeatMode:设置重复的模式 RESTART和REVERSE
 * setStartDelay：设置延迟执行
 * setInterpolator：设置动画插值器
 */

public class TestRropertyAnimation extends YmTestFragment {

    private final String LOG_TAG = Define.INSTANCE.getLOG_TAG();
    private ImageView mImageView = null;
    @Override
    protected View getHeaderView() {
        return createHeadView();
    }

    private View createHeadView(){
        mImageView = new ImageView(getContext());
        mImageView.setImageResource(R.mipmap.ic_launcher);
        return mImageView;
    }


    public void testAnim1(){
        mImageView.animate()
                .translationX(500)
                .setListener(createAnimatorListener())
                .setDuration(500);
    }

    public void testAnim2(){
        ObjectAnimator animator = ObjectAnimator.ofFloat(mImageView, "translationX", 500);
        animator.setDuration(2000);
        animator.setRepeatCount(10);
        animator.setRepeatMode(ValueAnimator.RESTART);
        animator.setStartDelay(1000);
        animator.addListener(createAnimatorListener());
        animator.start();
    }

    public void testTranslationX(){
        ObjectAnimator animator = ObjectAnimator.ofFloat(mImageView, "translationX", 500);
        animator.setTarget(mImageView);
        animator.setFloatValues(0, 500, 0);
        animator.setPropertyName("translationX");
        animator.setDuration(2000);
        animator.setRepeatCount(10);
        animator.setRepeatMode(ValueAnimator.RESTART);
        animator.setStartDelay(1000);
        animator.addListener(createAnimatorListener());
        animator.start();
    }


    private Animator.AnimatorListener createAnimatorListener(){
         return new Animator.AnimatorListener() {
            @Override
            public void onAnimationStart(Animator animation) {
                Log.i(LOG_TAG, "onAnimationStart");
            }

            @Override
            public void onAnimationEnd(Animator animation) {
                Log.i(LOG_TAG, "onAnimationEnd");
            }

            @Override
            public void onAnimationCancel(Animator animation) {
                Log.i(LOG_TAG, "onAnimationCancel");
            }

            @Override
            public void onAnimationRepeat(Animator animation) {
                Log.i(LOG_TAG, "onAnimationRepeat");
            }
        };
    }
}
